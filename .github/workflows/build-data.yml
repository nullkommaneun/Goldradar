name: build-data


on:
workflow_dispatch:
schedule:
- cron: "0 */2 * * *"


jobs:
build:
runs-on: ubuntu-latest
permissions:
contents: write
steps:
- name: Checkout
uses: actions/checkout@v4
- name: Setup Python
uses: actions/setup-python@v5
with:
python-version: "3.11"
- name: Install dependencies
run: |
python -m pip install --upgrade pip
pip install requests
- name: Fetch data
env:
FRED_API_KEY: ${{ secrets.FRED_API_KEY }}
run: python scripts/fetch_data.py
- name: Commit & push
run: |
git config user.name "github-actions[bot]"
git config user.email "41898282+github-actions[bot]@users.noreply.github.com"
git add data/history.json data/spot.json || true
git diff --cached --quiet || git commit -m "data: update"
git push
