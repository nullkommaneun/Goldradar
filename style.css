/* ====== Grundfarben & Scale ====== */
:root{
  --bg:#0b0f12;
  --card:#10161a;
  --ink:#e7edf2;
  --muted:#a5b0ba;
  --line:#162028;
  --ok:#16c98d;
  --warn:#ffcc47;
  --bad:#ff5a63;
  --neu:#596573;
  --accent:#55b5ff;

  --fs-xs: clamp(12px, 1.6vw, 13px);
  --fs-sm: clamp(14px, 1.9vw, 15px);
  --fs-md: clamp(16px, 2.2vw, 17px);
  --fs-lg: clamp(18px, 2.8vw, 22px);
  --fs-xl: clamp(22px, 3.6vw, 28px);

  --space-1: clamp(6px, 1.2vw, 8px);
  --space-2: clamp(10px, 1.8vw, 12px);
  --space-3: clamp(14px, 2.4vw, 16px);
  --space-4: clamp(18px, 3vw, 20px);
  --radius: 14px;

  --safe-top: env(safe-area-inset-top, 0px);
  --safe-right: env(safe-area-inset-right, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --safe-left: env(safe-area-inset-left, 0px);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  color:var(--ink);
  background:var(--bg);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  font-size:var(--fs-md);
  line-height:1.45;
  -webkit-tap-highlight-color: rgba(255,255,255,0.05);
  padding-left:var(--safe-left);
  padding-right:var(--safe-right);
}

/* ====== Header ====== */
.site-header{
  position:sticky; top:0; z-index:10;
  background:rgba(11,15,18,.9);
  backdrop-filter: blur(6px);
  border-bottom:1px solid var(--line);
  padding-top: calc(var(--safe-top) + var(--space-1));
  padding-bottom: var(--space-1);
}
.wrap{max-width:1000px;margin:0 auto;padding:0 var(--space-3)}
.header-wrap{display:flex;align-items:center;gap:var(--space-2)}
.brand{display:flex;align-items:center;gap:var(--space-2);min-height:44px}
.brand-title{margin:0;font-size:var(--fs-xl);font-weight:700}

/* ====== Grid / Cards ====== */
.grid{display:grid;gap:var(--space-3);padding:var(--space-3) 0}
@media (min-width: 880px){
  .grid{grid-template-columns:1fr 1fr}
}
.card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:var(--radius);
  padding:var(--space-3);
}
.card--full{grid-column:1/-1}
.title{margin:0 0 var(--space-1);font-size:var(--fs-lg);font-weight:700}
.subline{margin:0 0 var(--space-2);font-size:var(--fs-sm);color:var(--muted)}
.muted{color:var(--muted);font-size:var(--fs-sm)}

/* ====== Ampeln, Dots, Pills ====== */
.dot{width:14px;height:14px;border-radius:50%}
.dot--brand{background:var(--neu)}
.dot.green{background:var(--ok)} .dot.yellow{background:var(--warn)}
.dot.red{background:var(--bad)} .dot.neutral{background:var(--neu)}

.pill{
  display:inline-flex; align-items:center; justify-content:center;
  padding:0 var(--space-2);
  min-height:32px;
  border-radius:999px;
  border:1px solid #22313b;
  color:var(--muted); font-size:var(--fs-sm);
}
.pill--lg{min-height:36px;padding:0 var(--space-3);font-weight:600}
.badge{
  display:inline-flex;align-items:center;justify-content:center;
  min-height:32px; padding:0 var(--space-2);
  border-radius:10px;border:1px solid #22313b;font-size:var(--fs-sm)
}
.badge.green{border-color:var(--ok);color:var(--ok)}
.badge.yellow{border-color:var(--warn);color:var(--warn)}
.badge.red{border-color:var(--bad);color:var(--bad)}
.badge.neutral{border-color:#22313b;color:var(--muted)}

/* ====== Forecast KPIs ====== */
.list{display:grid;gap:var(--space-2)}
.list--kpi .kpi{
  display:flex;justify-content:space-between;align-items:center;
  padding:var(--space-2); border:1px solid var(--line); border-radius:10px;
  min-height:44px;
}

/* ====== Driver-Gruppen ====== */
.driver-group{margin-top:var(--space-2)}
.group-title{
  display:flex; align-items:center; gap:8px;
  margin:var(--space-2) 0 var(--space-1);
  font-size:var(--fs-md);
  color:#d9e2ea;
  font-weight:700;
}
.group-title .dot{width:10px;height:10px}

.driver{
  display:flex;justify-content:space-between;align-items:center;
  gap:var(--space-2);
  padding:var(--space-2);
  border:1px solid var(--line); border-radius:10px; background:#0e1317;
  min-height:56px;
  -webkit-user-select:none; user-select:none;
  transition: transform .04s ease, background .2s ease, border-color .2s ease;
}
.driver:active{transform:scale(0.995)}
.driver .ampel{display:flex;gap:var(--space-2);align-items:center;flex:1}
.driver .msg{font-size:var(--fs-sm)}
.driver .msg strong{display:block;font-size:var(--fs-md);margin-bottom:2px}

/* Info-Icon */
.info{
  display:inline-flex; align-items:center; justify-content:center;
  width:24px; height:24px; min-width:24px; min-height:24px;
  border-radius:50%; border:1px solid #22313b; color:var(--muted);
  font-size:12px; font-weight:700; cursor:help;
  margin-left:4px;
}

/* ====== Form (Portfolio) ====== */
.form-row{display:grid; grid-template-columns: 1fr; gap:var(--space-2); margin-bottom:var(--space-2)}
.form-label{font-size:var(--fs-sm); color:var(--muted)}
.form-input-wrap{position:relative; display:flex; align-items:center; gap:8px}
.input{
  width:100%; background:#0e1317; color:var(--ink);
  border:1px solid var(--line); border-radius:10px; min-height:48px;
  padding:0 42px 0 12px; font-size:var(--fs-md); outline:none;
}
.input:focus{border-color:#22313b; box-shadow:0 0 0 2px rgba(85,181,255,0.15)}
.input-suffix{position:absolute; right:10px; pointer-events:none; color:var(--muted); font-size:var(--fs-sm)}
.kpi--portfolio{border:1px solid var(--line); border-radius:10px; padding:var(--space-2)}

/* Legende */
.legend{display:flex;gap:var(--space-2);flex-wrap:wrap; margin-top:var(--space-2); font-size:var(--fs-xs);color:var(--muted)}
.legend-item{display:inline-flex;align-items:center;gap:6px}

/* ====== Diagnose (collapsible) ====== */
.diag-details{margin-top:var(--space-2)}
.diag-summary{
  list-style:none; cursor:pointer;
  padding:var(--space-2);
  border:1px solid var(--line); border-radius:10px;
  background:#0e1317; font-weight:600; min-height:44px; display:flex; align-items:center
}
.diag{margin-top:var(--space-2);padding:var(--space-2);border-radius:10px;background:#0e1317;border:1px solid #1a2430;font-size:var(--fs-xs);color:#c9d3dc;white-space:pre-wrap}

/* ====== Skeleton Loading ====== */
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
.skeleton{
  position:relative; overflow:hidden; border-color:#17222b !important; background:#0c1216 !important;
}
.skeleton .skeleton-bar{
  width:60%; height:14px; border-radius:8px;
  background: linear-gradient(90deg, #0f161b 25%, #1a2630 50%, #0f161b 75%);
  background-size: 200% 100%;
  animation: shimmer 1.2s infinite linear;
}
body.is-loading .skeleton { opacity: 1; }
body:not(.is-loading) .skeleton { display: none; }

/* ====== Accessibility ====== */
@media (prefers-reduced-motion: reduce){
  *{animation:none!important;transition:none!important}
  }
/* ...bestehende Styles bleiben unver√§ndert... */

/* Info-Icon */
.info{
  display:inline-flex; align-items:center; justify-content:center;
  width:28px; height:28px; min-width:28px; min-height:28px;
  border-radius:50%; border:1px solid #22313b; color:var(--muted);
  font-size:12px; font-weight:700; background:transparent;
  margin-left:4px; cursor:pointer;
}
.info:focus-visible{ outline:2px solid rgba(85,181,255,.5); outline-offset:2px }

/* Tooltip-Popover */
.tooltip {
  position: fixed; z-index: 50;
  max-width: 90vw; width: min(320px, 90vw);
  background: #0f1419;
  border: 1px solid #1b2731;
  color: var(--ink);
  border-radius: 10px;
  padding: 10px 12px;
  box-shadow: 0 8px 30px rgba(0,0,0,.5);
  font-size: var(--fs-sm);
}
.tooltip[data-pos="top"]::after,
.tooltip[data-pos="bottom"]::after{
  content:"";
  position:absolute; left:16px;
  border:8px solid transparent;
}
.tooltip[data-pos="top"]::after{
  bottom:-16px; border-top-color:#1b2731;
}
.tooltip[data-pos="bottom"]::after{
  top:-16px; border-bottom-color:#1b2731;
}

/* Skeletons usw. bleiben wie in deiner aktuellen Datei */
