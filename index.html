<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gold-Kauf-Signal</title>
  <style>
    /* Styles wie zuvor – unverändert */
  </style>
</head>
<body>
  <!-- Header und Main wie zuvor – unverändert -->

  <script>
    // ... dein gesamtes JS wie zuvor ...

    // Forecasts (robust gegen NaN)
    const horizons=[30,90,180];
    const $fc = document.getElementById('forecast');
    horizons.forEach(h=>{
      const f = forecast(goldSeries, h);
      const last = goldSeries.length ? goldSeries[goldSeries.length-1].price : null;
      const medPct = (isFinite(f.median) && isFinite(last) && last>0) ? (f.median/last - 1) : null;

      const status = (!isFinite(medPct) ? 'neutral' : medPct>0.02 ? 'green' : medPct<-0.02 ? 'red' : 'yellow');

      const bandLo = (isFinite(f.lo) && isFinite(f.median) && f.median>0) ? (100*(f.lo/f.median - 1)).toFixed(1)+'%' : '—';
      const bandHi = (isFinite(f.hi) && isFinite(f.median) && f.median>0) ? (100*(f.hi/f.median - 1)).toFixed(1)+'%' : '—';

      const wrap = document.createElement('div');
      wrap.className='kpi';
      wrap.innerHTML = `
        <span>${h} Tage</span>
        <span>
          <span class="badge ${status}">${isFinite(medPct)? (medPct>=0?'+':'')+(100*medPct).toFixed(1)+'%':'—'}</span>
          <span class="band">[${bandLo}, ${bandHi}]</span>
        </span>`;
      $fc.appendChild(wrap);
    });

    // ... restliches JS bleibt wie gehabt ...
  </script>
</body>
</html>
